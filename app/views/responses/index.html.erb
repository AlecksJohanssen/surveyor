<h1><%= link_to "Questions", edit_survey_path(@survey) %> | Responses</h1>

<p>
  <%= link_to "New Response", new_survey_response_path(@survey), class: 'btn btn-secondary' %>
</p>

<%= paginate @responses %>
<table class="table table-sm table-bordered table-striped">
  <thead>
    <tr>
      <th>#</th>
      <% @survey.questions.each do |question| %>
        <th><%= question.title %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @responses.each do |response| %>
      <tr>
        <td><%= response.id %></td>
        <% @survey.questions.each do |question| %>
          <td>
            <% question.choices.each do |choice| %>
              <div>
                <% response.answers_for(question: question, choice: choice).each do |answer| %>
                  <span data-answer-id="<%= answer.id %>">
                    <%= answer.content %>
                  </span>
                <% end %>
              </div>
            <% end %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @responses %>
